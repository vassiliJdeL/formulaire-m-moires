<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Soumission de mÃ©moire / Thesis submission</title>
</head>
<body>
  <h2>Soumission de mÃ©moire / Thesis submission</h2>

  <form action="https://hook.eu2.make.com/404rtrr13j5vbygd0zi1ck9wkv4j0hlm" method="post">
    <label for="prenom">PrÃ©nom / First name:</label><br />
    <input type="text" id="prenom" name="prenom" required /><br /><br />

    <label for="nom">Nom / Last name:</label><br />
    <input type="text" id="nom" name="nom" required /><br /><br />

    <label for="titre">Titre du mÃ©moire / Thesis title:</label><br />
    <input type="text" id="titre" name="titre" required /><br /><br />

    <label for="email">Adresse email / Email address:</label><br />
    <input type="email" id="email" name="email" required /><br /><br />

    <label for="langue">Langue du mÃ©moire / Thesis language:</label><br />
    <select id="langue" name="langue" required>
      <option value="">-- Choisissez / Select --</option>
      <option value="franÃ§ais">FranÃ§ais / French</option>
      <option value="anglais">Anglais / English</option>
    </select><br /><br />

    <label for="file">TÃ©lÃ©verser le fichier / Upload your file (.docx only):</label><br />
    <input type="hidden" role="uploadcare-uploader" 
           name="file" 
           data-public-key="21d7228fa1f01ac80183" 
           data-clearable 
           data-file-types=".docx" /><br /><br />

    <label>
      <input type="checkbox" name="rgpd" required />
      J'accepte le traitement automatisÃ© de mes donnÃ©es dans le cadre de l'Ã©valuation de mon mÃ©moire. /
      I agree to the automated processing of my data for the purpose of evaluating my thesis.
    </label><br /><br />

    <!-- âœ… Champ cachÃ© TOKEN ajoutÃ© ici -->
    <input type="hidden" name="token" value="2_TOUGH_eval_5_on" />

    <button type="submit">Soumettre / Submit</button>
  </form>

  <div id="confirmation" style="display:none; margin-top:20px;">
    <h2>ğŸ‡«ğŸ‡· MÃ©moire reÃ§u avec succÃ¨s</h2>
    <p>Merci, ton mÃ©moire a bien Ã©tÃ© soumis.<br />
    â³ <strong>Lâ€™Ã©valuation est en cours de traitement.</strong><br />
    Tu la recevras par email dans les prochaines minutes, Ã  lâ€™adresse que tu as indiquÃ©e.<br />
    ğŸ“© <strong>Pense Ã  vÃ©rifier aussi tes courriers indÃ©sirables</strong> (spams), surtout si tu utilises une adresse universitaire, Hotmail ou Outlook.</p>
    <hr />
    <h2>ğŸ‡¬ğŸ‡§ Thesis successfully submitted</h2>
    <p>Thank you, your thesis has been successfully submitted.<br />
    â³ <strong>Your evaluation is being processed.</strong><br />
    You will receive it by email within the next few minutes, at the address you provided.<br />
    ğŸ“© <strong>Donâ€™t forget to check your spam folder</strong>, especially if you are using a university, Hotmail or Outlook email.</p>
  </div>

  <script>
    UPLOADCARE_PUBLIC_KEY = "21d7228fa1f01ac80183";
  </script>
  <script src="https://ucarecdn.com/libs/widget/3.x/uploadcare.full.min.js"></script>

  <script>
    document.querySelector('form').addEventListener('submit', function (e) {
      e.preventDefault(); // EmpÃªche le rechargement
      const form = e.target;
      const formData = new FormData(form);

      fetch(form.action, {
        method: 'POST',
        body: formData
      })
      .then(response => {
        if (response.ok) {
          form.style.display = 'none';
          document.getElementById('confirmation').style.display = 'block';
        } else {
          alert("Erreur lors de la soumission. Veuillez rÃ©essayer.");
        }
      })
      .catch(() => {
        alert("Erreur de connexion. Veuillez rÃ©essayer.");
      });
    });
  </script>
</body>
</html>
